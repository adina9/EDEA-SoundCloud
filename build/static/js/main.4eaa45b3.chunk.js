(this["webpackJsonptemplate-app"]=this["webpackJsonptemplate-app"]||[]).push([[0],{64:function(e,t,r){},91:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r(0),a=r.n(c),s=r(24),o=r.n(s),i=(r(64),r(5)),u=r(3),l=r.n(u),p=r(4),f=r(20),j=r(8),h=r(19),b=r(53),d=r.n(b),O=r(22),x=r(12),v=r(42),k={query:m,get:function(e,t){return m(e).then((function(e){return e.find((function(e){return e.key===t}))}))},post:function(e,t){return m(e).then((function(r){return r.push(t),y(e,r),r}))},put:function(e,t){return m(e).then((function(r){var n=r.findIndex((function(e){return e._id===t._id}));return r.splice(n,1,t),y(e,r),r}))},postMany:function(e,t){return m(e).then((function(r){return r.push.apply(r,Object(O.a)(t)),y(e,r),r}))}};function m(e){var t=JSON.parse(localStorage.getItem(e))||[];return Promise.resolve(t)}function y(e,t){localStorage.setItem(e,JSON.stringify(t))}var g=r.n(v).a.create({withCredentials:!1}),w="trackDB",S="searchDB",T={query:function(e){return N.apply(this,arguments)},choose:function(e){return C.apply(this,arguments)},querySearches:function(){return E.apply(this,arguments)},saveSearch:function(e){return M.apply(this,arguments)}};function N(){return(N=Object(p.a)(l.a.mark((function e(t){var r,n,c,a,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,k.query(w);case 3:if(!(n=e.sent).length){e.next=19;break}if(!((c=n.reduce((function(e,r){return r.key.includes(t)&&e.push(Object(x.a)({},r)),e}),[])).length>=6)){e.next=10;break}return e.abrupt("return",Promise.resolve(c));case 10:return e.next=12,g.get("https://api.mixcloud.com/search/?q=".concat(t,"&type=cloudcast"));case 12:return a=e.sent,s=a.data,r=Object(O.a)(s.data),k.postMany(w,r),e.abrupt("return",Promise.resolve(r));case 17:e.next=27;break;case 19:return e.next=21,g.get("https://api.mixcloud.com/search/?q=".concat(t,"&type=cloudcast"));case 21:return o=e.sent,i=o.data,r=Object(O.a)(i.data),console.log("storageArr after call:",r),k.postMany(w,r),e.abrupt("return",Promise.resolve(r));case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.query(S);case 3:return t=e.sent,e.abrupt("return",Promise.resolve(t));case 7:e.prev=7,e.t0=e.catch(0),console.log("err in trackAction in loadSearches:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function C(){return(C=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,k.get(w,t.key);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.resolve.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post(S,t);case 2:return r=e.sent,e.abrupt("return",Promise.resolve(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return function(){var t=Object(p.a)(l.a.mark((function t(r){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.query(e);case 3:n=t.sent,r({type:"SET_TRACKS",tracks:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err in trackAction in loadTracks:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function _(e){return function(){var t=Object(p.a)(l.a.mark((function t(r){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=7;break}return t.next=4,T.choose(e);case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=null;case 8:n=t.t0,r({type:"SET_TRACK",choosedTrack:n}),t.next=15;break;case 12:t.prev=12,t.t1=t.catch(0),console.log("err in trackAction in loadTracks:",t.t1);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function P(e,t){return function(){var r=Object(p.a)(l.a.mark((function r(n){var c;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,e){r.next=7;break}return r.next=4,T.saveSearch(t);case 4:r.t0=r.sent,r.next=10;break;case 7:return r.next=9,T.querySearches();case 9:r.t0=r.sent;case 10:c=r.t0,n({type:"SET_SEARCHES",searches:c}),n({type:"SET_LAST_SEARCH",search:t}),r.next=18;break;case 15:r.prev=15,r.t1=r.catch(0),console.log("err in trackAction in setLastSearch:",r.t1);case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e){return r.apply(this,arguments)}}()}var D="prefsDB",R={loadPrefs:function(){return q.apply(this,arguments)},setDisplay:function(e){return F.apply(this,arguments)},setMode:function(e){return B.apply(this,arguments)}};function q(){return(q=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.query(D);case 3:return t=e.sent,Array.isArray(t)&&(t={isDarkMode:!1,isTile:!1}),e.abrupt("return",I(t));case 8:e.prev=8,e.t0=e.catch(0),console.log("err in prefsAction in loadPrefs:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function F(){return(F=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.query(D);case 2:return(r=e.sent).isTile=t,e.abrupt("return",I(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.query(D);case 2:return(r=e.sent).isDarkMode=t,e.abrupt("return",I(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return L.apply(this,arguments)}function L(){return(L=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem(D,JSON.stringify(t)),e.abrupt("return",Promise.resolve(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return function(){var e=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.loadPrefs();case 3:r=e.sent,t({type:"SET_PREFS",prefs:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("err in trackAction in loadTracks:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function J(e){return function(){var t=Object(p.a)(l.a.mark((function t(r){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.setDisplay(e);case 3:n=t.sent,r({type:"SET_PREFS",prefs:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err in trackAction in loadTracks:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}var K=r(43),U=r.n(K),W=r(44),X=r.n(W),Y=function(e){var t=e.track,r=e.isDarkMode;return Object(n.jsx)("div",{className:"track-player",children:Object(n.jsx)("iframe",{className:"iframe-player",width:"100%",src:"https://www.mixcloud.com/widget/iframe/?feed=https://www.mixcloud.com".concat(t.key,"&hide_cover=2&hide_artwork=1&light=").concat(!r),frameBorder:"0"})})},G=function(e){var t=e.txt,r=e.icon;return Object(n.jsxs)("div",{className:"no-search flex col pos a j-between a-center",children:[r,Object(n.jsx)("p",{children:t}),Object(n.jsx)(h.b,{to:"/",className:"back-to-tracks flex a-center",children:Object(n.jsx)("small",{children:"back to tracks"})})]})},V=function(){var e=Object(c.useState)(!1),t=Object(f.a)(e,2),r=t[0],a=t[1],s=Object(j.c)((function(e){return e.trackModule})).currTrack,o=Object(j.c)((function(e){return e.prefsModule})).isDarkMode;return s?Object(n.jsxs)("div",{className:"track-details flex col j-around",children:[Object(n.jsx)(h.b,{to:"/",className:"details-link",children:Object(n.jsx)(X.a,{})}),Object(n.jsx)("div",{className:"imgs-container flex a-center j-between",children:Object(O.a)(Array(3)).map((function(e,t){return Object(n.jsx)("img",{onClick:1===t?function(){return a(!0)}:"",src:1!==t?s.pictures.medium:s.pictures.large,alt:s.name})}))}),r?Object(n.jsx)(Y,{track:s,isDarkMode:o}):Object(n.jsx)("div",{className:"click-img-elmnt",children:Object(n.jsx)("p",{children:"click the central image to turn on the music"})})]}):Object(n.jsx)(G,{txt:"No track has been choosed",icon:Object(n.jsx)(U.a,{})})},$=r(50),z=r.n($),Q=r(49),Z=r.n(Q),ee=r(47),te=r.n(ee),re=r(48),ne=r.n(re),ce=r(46),ae=r.n(ce),se=r(45),oe=r.n(se),ie=function(e){var t=e.backOrNext,r=e.onSetDisplay,c=e.isTile,a=e.isOnMainPage,s=[Object(n.jsx)(oe.a,{}),Object(n.jsx)(ae.a,{})],o=[Object(n.jsx)(te.a,{}),Object(n.jsx)(ne.a,{})];return Object(n.jsxs)("div",{className:"btns-control flex j-between pos a",children:[Object(n.jsx)("div",{className:"arrow-btns flex j-between",children:s.map((function(e,r){return Object(n.jsx)("div",{onClick:function(){return t(!!r)},children:e},r)}))}),a&&Object(n.jsx)("div",{className:"disaply-btns flex j-between",children:o.map((function(e,t){return Object(n.jsx)("div",{style:{color:c===!!t?"black":""},onClick:function(){return r(!!t)},children:e},t)}))})]})},ue=function(e){var t=e.history.push,r=Object(c.useState)([]),a=Object(f.a)(r,2),s=a[0],o=a[1],i=Object(j.c)((function(e){return e.trackModule})).searches,u=Object(j.b)();Object(c.useEffect)((function(){u(function(){var e=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.querySearches();case 3:r=e.sent,t({type:"SET_SEARCHES",searches:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("err in trackAction in loadTracks:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),o(i.slice(0,5))}),[]);return i.length?Object(n.jsxs)("div",{className:"recent-searches flex col",children:[Object(n.jsx)("p",{children:"Your searches"}),s.map((function(e,r){return Object(n.jsxs)("div",{className:"search-preview",onClick:function(){return function(e){var r=i.find((function(t){return t===e}));u(P(r,e)),t("/")}(e)},children:[Object(n.jsx)(z.a,{}),e]},r)})),Object(n.jsx)(ie,{backOrNext:function(e){var t;if(e){var r=i.indexOf(s[s.length-1])+1;t=i.slice(r,r+5)}else{var n=i.indexOf(s[0]);t=i.slice(n-5,n)}t.length&&o(t)},isOnMainPage:!1})]}):Object(n.jsx)(G,{txt:"no recent searches yet...",icon:Object(n.jsx)(Z.a,{})})},le=r(51),pe=r.n(le),fe=function(e){var t=e.onSearch,r=e.saveSearch,a=e.lastSearch,s=Object(c.useState)(""),o=Object(f.a)(s,2),i=o[0],u=o[1],l=Object(c.useRef)(null);Object(c.useEffect)((function(){l.current.focus(),u(a)}),[a]);return Object(n.jsx)("section",{className:"app-search",children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i&&(t(i),r(i))},children:[Object(n.jsx)("input",{ref:l,type:"text",value:i,name:"name",placeholder:"Search...",onChange:function(e){var t=e.target.value;u(t)},autoComplete:"off"}),Object(n.jsx)("button",{className:"search-icon ".concat(i?"isActive":""),children:Object(n.jsx)(pe.a,{})})]})})},je=function(){return Object(n.jsx)("div",{className:"loading",children:Object(n.jsx)("h3",{style:{color:"white"},children:"Loading..."})})},he=r(52),be=r.n(he),de=function(e){var t=e.track,r=e.onChooseTrack;return Object(n.jsxs)("div",{className:"track-preview",onClick:Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:[Object(n.jsx)(be.a,{}),Object(n.jsx)("div",{className:"pos a",children:Object(n.jsx)("img",{src:t.pictures.medium,alt:t.name})}),Object(n.jsx)("p",{children:t.name})]})},Oe=function(e){var t=e.tracks,r=e.isTile,c=e.onChooseTrack;return t.length?Object(n.jsx)("div",{className:"track-list flex col pos r ".concat(r?"tile":""),children:t.map((function(e,t){return Object(n.jsx)(de,{onChooseTrack:c,track:e},t)}))}):Object(n.jsx)(je,{})},xe=function(e){var t=e.history.push,r=Object(i.f)().pathname,a=Object(j.b)(),s=Object(j.c)((function(e){return e.trackModule})),o=s.tracks,u=s.currTrack,b=s.searches,O=s.lastSearch,x=Object(j.c)((function(e){return e.prefsModule})).isTile,v=Object(c.useState)([]),k=Object(f.a)(v,2),m=k[0],y=k[1];Object(c.useEffect)((function(){a(A(O)),y(o.slice(0,6)),a(H()),1===r.length&&a(_(null))}),[O,r]),Object(c.useEffect)((function(){u&&t("/track/".concat(u.key.substr(1))),(null===o||void 0===o?void 0:o.length)&&y(o.slice(0,6))}),[u,o]);var g=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(J(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){return 1===r.length};return Object(n.jsxs)("section",{className:"track-app  flex a-center col pos r",children:[w()&&Object(n.jsx)(fe,{onSearch:function(e){a(A(e))},saveSearch:function(e){a(P(b.includes(e),e))},lastSearch:O}),r.length<10&&Object(n.jsx)(h.c,{to:"/searches",activeClassName:"isOnSearch",children:Object(n.jsx)(d.a,{titleAccess:"Your last searches",className:"search-icon pos a"})}),!u&&w()&&Object(n.jsx)(Oe,{tracks:m,isTile:x,onChooseTrack:function(e){a(_(e))}}),Object(n.jsxs)(i.c,{children:[Object(n.jsx)(i.a,{path:"/searches",exact:!0,component:ue}),Object(n.jsx)(i.a,{path:"/track/:key",component:V})]}),!u&&w()&&Object(n.jsx)(ie,{backOrNext:function(e){var t;if(e){var r=o.indexOf(m[m.length-1])+1;t=o.slice(r,r+6)}else{var n=o.indexOf(m[0]);t=o.slice(n-6,n)}t.length&&y(t)},onSetDisplay:g,isTile:x,isOnMainPage:!0})]})},ve=r(56),ke=r.n(ve),me=r(55),ye=r.n(me),ge=r(54),we=r.n(ge),Se=function(e){var t=e.value,r=e.onUpdate;return Object(n.jsx)("div",{className:"toggle-wrapper pos a",children:Object(n.jsxs)("div",{className:"toggle checkcross pa",children:[Object(n.jsx)("input",{type:"text"}),Object(n.jsx)("label",{className:"toggle-item",style:{backgroundColor:t?"#969696b5":"#ffeaab"},onClick:function(){return r(!t)},children:Object(n.jsx)("div",{className:t?"check":"uncheck",children:t?Object(n.jsx)(we.a,{}):Object(n.jsx)(ye.a,{})})})]})})},Te=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.prefsModule})).isDarkMode;return Object(c.useEffect)((function(){e(H()),console.log(t)}),[t]),Object(n.jsxs)("div",{className:"App ".concat(t?"dark":""),children:[Object(n.jsx)(ke.a,{className:"music-icon pos a"}),Object(n.jsx)(h.a,{children:Object(n.jsx)(i.a,{path:"/",component:xe})}),Object(n.jsx)(Se,{value:t,onUpdate:function(t){e(function(e){return function(){var t=Object(p.a)(l.a.mark((function t(r){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.setMode(e);case 3:n=t.sent,r({type:"SET_PREFS",prefs:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err in trackAction in loadTracks:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(t))}})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ne=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,103)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},Ee=r(23),Ce=r(57),Me={isTile:!1,isDarkMode:!1};var Ae={tracks:[],currTrack:null,searches:["adele"],lastSearch:"adele"};var _e=Object(Ee.c)({trackModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_TRACKS":return Object(x.a)(Object(x.a)({},e),{},{tracks:t.tracks});case"SET_TRACK":return Object(x.a)(Object(x.a)({},e),{},{currTrack:t.choosedTrack});case"SET_SEARCHES":return Object(x.a)(Object(x.a)({},e),{},{searches:t.searches});case"SET_LAST_SEARCH":return Object(x.a)(Object(x.a)({},e),{},{lastSearch:t.search});default:return e}},prefsModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_PREFS":var r=t.prefs,n=r.isDarkMode,c=r.isTile;return Object(x.a)(Object(x.a)({},e),{},{isDarkMode:n,isTile:c});default:return e}}}),Pe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ee.d,De=Object(Ee.e)(_e,Pe(Object(Ee.a)(Ce.a)));window.myStore=De,De.subscribe((function(){console.log("Global State is:",De.getState().trackModule)})),o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(j.a,{store:De,children:Object(n.jsx)(Te,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Ne()}},[[91,1,2]]]);
//# sourceMappingURL=main.4eaa45b3.chunk.js.map